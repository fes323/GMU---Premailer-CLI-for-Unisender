# GMU - Premailer CLI-app
GMU –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–æ–±—Ä–∞—Ç—å –∞—Ä—Ö–∏–≤ E-mail —Ä–∞—Å—Å—ã–ª–∫–∏ –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –≤ —Å–µ—Ä–≤–∏—Å —Ä–∞—Å—Å—ã–ª–æ–∫ (Unisender/SendSay).
–ï—Å—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –ø–∏—Å–µ–º –≤ Unisender –ø–æ API (```gmu message create/update/delete```).

![CLI working](https://my-bucket.ru/upload/process_1709.gif)

## ü§ñ –£—Å—Ç–∞–Ω–æ–≤–∫–∞
–î–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ CLI –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Python >= 3.6 –∏ –ø–∞–∫–µ—Ç–Ω—ã–π –º–µ–Ω–µ–¥–∂–µ—Ä pip.
1. –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–µ–∫—Ç –Ω–∞ –ª–æ–∫–∞–ª—å–Ω—ã–π –¥–∏—Å–∫   
```bash
git clone https://github.com/fes323/GMU---Premailer-CLI-for-Unisender./tree/main
```   
2. –ü–µ—Ä–µ–π—Ç–∏ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –ø—Ä–æ–µ–∫—Ç–∞    
```bash
cd  GMU---Premailer-CLI-for-Unisender
```   
3. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏   
```bash
poetry install
```
4. –°–æ–±—Ä–∞—Ç—å —É—Å—Ç–∞–Ω–æ–≤—â–∏–∫    
```bash 
poetry build
```
5. –ü–µ—Ä–µ–π—Ç–∏ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é dist/   
```bash
cd dist
```
6. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å CLI 
```bash
pip install <–Ω–∞–∑–≤–∞–Ω–∏–µ –ø–∞–∫–µ—Ç–∞ whl>
```   
–≠—Ç–æ –ø–æ–∑–≤–æ–ª–∏—Ç —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å CLI –≤ –≥–ª–æ–±–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ. –í –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–µ –ø–æ—è–≤–∏—Ç—Å—è –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–æ–º–∞–Ω–¥—ã gmu.
–î–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏ —É—Å—Ç–∞–Ω–æ–≤–∏ –º–æ–∂–Ω–æ –≤–≤–µ—Å—Ç–∏ –±–∞–∑–æ–≤—É—é –∫–æ–º–∞–Ω–¥—É 
```bash 
gmu --version
```

## –ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏
–í—Å–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –ø–µ—Ä–µ—á–∏—Å–ª–µ–Ω—ã –≤ —Ñ–∞–π–ª–µ ```pyproject.toml```   
–í—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –º–æ–∂–Ω–æ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤ ```requirements.txt```   

1. [Typer](https://github.com/fastapi/typer)
2. [Premailer](https://github.com/peterbe/premailer)
3. [beautifulsoup4](https://www.crummy.com/software/BeautifulSoup/)
4. [requests](https://requests.readthedocs.io/en/latest/)
5. [python-dotenv](https://github.com/theskumar/python-dotenv)
6. [cairosvg](https://cairosvg.org/)
7. [termcolor](https://github.com/termcolor/termcolor)
8. [pillow](https://python-pillow.github.io/)  

–£ **CairoSVG** –µ—Å—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏, –∫–æ—Ç–æ—Ä—ã–µ –Ω—É–∂–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≤—Ä—É—á–Ω—É—é.  
* Windows - [GTK-for-Windows-Runtime-Environment-Installer](https://github.com/tschoonj/GTK-for-Windows-Runtime-Environment-Installer)  
* macOS - cairo –∏ libffi ([Homebrew](https://brew.sh/)). –ù–∞ macOS –Ω–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–ª, –ø–æ—ç—Ç–æ–º—É —Ä–µ–∫–æ–º–µ–Ω–¥—É—é –æ–∑–Ω–∞–∫–æ–º–∏—Ç—å—Å—è —Å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏ –≤ [–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ CairoSVG](https://cairosvg.org/documentation/)  
* Linux - cairo, python3-dev –∏ libffi-dev –ø–∞–∫–µ—Ç—ã  

**–°–æ–∑–¥–∞–Ω–∏–µ PDF –¥–æ—Å—Ç—É–ø–Ω–æ –ø–æ–∫–∞ —Ç–æ–ª—å–∫–æ –¥–ª—è Windows.**
–ï—Å—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å, –∫–æ—Ç–æ—Ä—É—é –Ω—É–∂–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≤—Ä—É—á–Ω—É—é - [wkhtmltopdf](https://wkhtmltopdf.org/)
–ö —Å–æ–∂–∞–ª–µ–Ω–∏—é, –æ–±—ã—á–Ω—ã–µ –∫–æ–Ω–≤–µ—Ä—Ç–æ—Ä—ã PDF –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç –≤ –ø–æ–ª–Ω–æ–π –º–µ—Ä–µ —Ç–∞–±–ª–∏—á–Ω—É—é –≤–µ—Ä—Å—Ç–∫—É, –ø–æ—ç—Ç–æ–º—É –ø—Ä–∏—Ö–æ–¥–∏—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –±–æ–ª–µ–µ –∏–∑–æ–æ—â–µ—Ä–µ–Ω–Ω—ã–µ –ø–æ–¥—Ö–æ–¥—ã.   
wkhtmltopdf –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —É—Å—Ç–∞—Ä–µ–ª, –∏–º–µ–µ—Ç –±–∞–≥–∏ –∏ –ø–æ—á—Ç–∏ –Ω–µ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è. –ò–¥—É—Ç –ø–æ–∏—Å–∫–∏ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã—Ö —Ä–µ—à–µ–Ω–∏–π.  
  
## –ê–≤—Ç–æ–¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ/–∞–≤—Ç–æ–∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥
–î–ª—è –∞–≤—Ç–æ–¥–æ–ø–æ–ª–Ω–µ–Ω–∏—è –∫–æ–º–∞–Ω–¥ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ, –ø–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ gmu, –≤—ã–ø–æ–ª–Ω–∏—Ç—å —Å–ª–µ–¥—É—é—â–∏–µ –∫–æ–º–∞–Ω–¥—ã:
1. ```gmu --install-completion``` - —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∞–≤—Ç–æ–¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ
2. ```gmu --show-completion``` - –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∞–≤—Ç–æ–¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ  

–≠—Ç–æ –ø–æ–∑–≤–æ–ª–∏—Ç –∑–∞–≤–µ—Ä—à–∞—Ç—å –∫–æ–º–∞–Ω–¥—ã –ø–æ –Ω–∞–∂–∞—Ç–∏—é TAB.

## –ó–∞–≥—Ä—É–∑–∫–∞ –ø–∏—Å–µ–º - [Unisender](https://www.unisender.com/)
–î–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –ø–∏—Å–µ–º –≤ Unisender –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —É–∫–∞–∑–∞—Ç—å API Key –≤ —Ñ–∞–π–ª–µ ```.env```.

**–î–æ—Å—Ç—É–ø–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã**
1. –°–æ–∑–¥–∞–µ—Ç/–æ–±–Ω–æ–≤–ª—è–µ—Ç –ø–∏—Å—å–º–æ –≤ Unisender. –ï—Å–ª–∏ –≤ —Ä–∞–±–æ—á–µ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –µ—Å—Ç—å gmu.json —Å message_id, —Ç–æ –ø–∏—Å—å–º–æ –±—É–¥–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–æ (—Å—Ç–∞—Ä–æ–µ –ø–∏—Å—å–º–æ —É–¥–∞–ª–µ–Ω–æ –∏ —Å–æ–∑–¥–∞–Ω–æ –Ω–æ–≤–æ–µ), –µ—Å–ª–∏ —Ñ–∞–π–ª–∞ gmu.json –Ω–µ—Ç –∏/–∏–ª–∏ –Ω–µ—Ç message_id, —Ç–æ –±—É–¥–µ—Ç —Å–æ–∑–¥–∞–Ω–æ –Ω–æ–≤–æ–µ –ø–∏—Å—å–º–æ
```bash
gmu message upsert
```
2. C–æ–∑–¥–∞–µ—Ç –ø–∏—Å—å–º–æ –≤ Unisender. ID –ø–∏—Å—å–º–∞ –∫–æ–ø–∏—Ä—É–µ—Ç—Å—è –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞.
```bash
gmu message create
```
3. –û–±–Ω–æ–≤–ª—è–µ—Ç –ø–∏—Å—å–º–æ –≤ Unisender. –ò–∑-–∑–∞ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è Unisender, –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –¥–≤–∞ –º–µ—Ç–æ–¥–∞ API - ```delete``` –∏ ```create```, —Ç.–∫. –µ—Å–ª–∏ –≤—ã–∑—ã–≤–∞—Ç—å –º–µ—Ç–æ–¥ ```update```, —Ç–æ –ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ –∫–∞—Ä—Ç–∏–Ω–æ–∫ —á–µ—Ä–µ–∑ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é ```images/``` –≤–æ–∑–Ω–∏–∫–∞–µ—Ç –æ—à–∏–±–∫–∞, —á—Ç–æ Unisender –Ω–µ –∑–∞–≥—Ä—É–∂–∞–µ—Ç –∫–∞—Ä—Ç–∏–Ω–∫–∏, –∞ –ª–∏—à—å –æ–±–Ω–æ–≤–ª—è–µ—Ç —Å–∞–º—É –≤–µ—Ä—Å—Ç–∫—É.
```bash
gmu message update
```
4. –£–¥–∞–ª—è–µ—Ç –ø–∏—Å—å–º–æ –≤ Unisender.
```bash
gmu message delete
```

## –ó–∞–≥—Ä—É–∑–∫–∞ –ø–∏—Å–µ–º - [WebLetter-api](https://github.com/rastereo/webletter-api)
–ï—Å—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –ø—Ä–µ–≤—å—é –ø–∏—Å–µ–º –Ω–∞ [WebLetter](https://github.com/rastereo/webletter-api "–ü—Ä–æ–µ–∫—Ç –Ω–∞ GitHub. –ù—É–∂–Ω–æ –±—É–¥–µ—Ç —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—å backend –∏ frontend –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ –∏–ª–∏ –ª–æ–∫–∞–ª—å–Ω–æ –∏ –¥–æ–±–∞–≤–∏—Ç—å –∞–¥—Ä–µ—Å + —Ç–æ–∫–µ–Ω –≤ .env —Ñ–∞–π–ª").
–§—É–Ω–∫—Ü–∏—è –∑–∞–≥—Ä—É–∑–∫–∏ –ø–∏—Å–µ–º –Ω–∞ WebLetter –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è –æ—Ç –∑–∞–≥—Ä—É–∑–∏ –ø–∏—Å–µ–º –≤ Unisender, —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã —Ä–∞–∑–Ω—ã–µ –ø–æ–¥—Ö–æ–¥—ã.

**–°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ –∫–æ–º–∞–Ω–¥—ã:**
1. –ó–∞–≥—Ä—É–∑–∏—Ç—å/–æ–±–Ω–æ–≤–∏—Ç—å –ø–∏—Å—å–º–æ –Ω–∞ WebLetter
```bash
gmu wl upsert
```
2. –£–¥–∞–ª–∏—Ç—å –ø–∏—Å—å–º–æ
```bash
gmu wl delete
```

## –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏
1. –°–æ–∑–¥–∞–Ω–∏–µ PDF –î–æ–∫—É–º–µ–Ω—Ç–∞ (—Ç–æ–ª—å–∫–æ Windows)
```bash
gmu pdf
```
2. –°–æ–∑–¥–∞–Ω–∏–µ –∞—Ä—Ö–∏–≤–∞
```bash
gmu archive
```



